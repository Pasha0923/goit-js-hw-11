{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BAZE_URL = 'https://pixabay.com/api';\nconst API_KEY = '41870399-9b44301246ceb98c07efd626a';\n\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  photoList: document.querySelector('.photo-list'),\n  loader: document.querySelector('.loader'),\n};\nrefs.loader.style.display = 'none';\nrefs.searchForm.addEventListener('submit', handleSearch); // обробник подій на форму\n\nfunction handleSearch(event) {\n  event.preventDefault(); // скидуємо стандартну поведінку браузера\n  // функція,яка описує обробник події  handleSearch\n  refs.loader.style.display = 'inline-block';\n  refs.photoList.innerHTML = ''; // очищаємо вміст галереї (перед здійсненням нового пошуку вміст\n  // галереї очищаємо щоб уникнути переплутання результатів)\n  const form = event.currentTarget;\n  const query = form.elements.query.value; // дістаємо значення з форми\n  // перевірка на пустий рядок запиту\n  if (query === '') {\n    iziToast.show({\n      message: 'Please enter your request',\n      position: 'topRight',\n      color: 'yellow',\n    });\n    refs.loader.style.display = 'none';\n\n    return;\n  }\n  searchPhoto(query)\n    .then(createMarkuPhoto)\n    .catch(err => console.log(err))\n    .finally(() => form.reset());\n  console.log(query);\n}\n\n// пишемо функцію для того щоб робити запит\nfunction searchPhoto(value) {\n  return fetch(\n    `${BAZE_URL}/?key=${API_KEY}&q=${value}&image_type=photo&orientation=horizontal&safesearch=true&per_page=9`\n  ).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n\n    return resp.json();\n  });\n}\n\n// function searchPhoto(value) {\n//   const urlParams = new URLSearchParams({\n//     key: API_KEY,\n//     q: value,\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: true,\n//   });\n// }\n\nfunction createMarkuPhoto({ hits }) {\n  refs.loader.style.display = 'none';\n  // перевірка на відсутність результатів від бекенду (якщо бекенд повертає порожній масив)\n  if (hits.length === 0) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n    console.log(hits);\n    return;\n  }\n  // створення розмітки\n  const markup = hits\n    .map(\n      hits => `<li class=\"gallery-item\">\n<a class=\"gallery-link\" href=\"${hits.largeImageURL}\">\n<img class=\"gallery-image\" ;\n    src=\"${hits.webformatURL}\"\n    data-source=\"${hits.largeImageURL}\"\n   alt=\"${hits.tags}\" />\n   </a>\n    <p>Likes: ${hits.likes}</p>\n   <p>Views: ${hits.views}</p>\n   <p>Comment: ${hits.comments}</p>\n   <p>Downloads: ${hits.downloads}</p>\n</li>`\n    )\n    .join('');\n  // додаємо нові елементи до галереї\n  refs.photoList.innerHTML = markup;\n  // викликали метод бібліотеки SimpleLightbox\n  refreshPage.refresh();\n}\n\nconst refreshPage = new SimpleLightbox('.photo-list a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n"],"names":["BAZE_URL","API_KEY","refs","handleSearch","event","form","query","iziToast","searchPhoto","createMarkuPhoto","err","value","resp","hits","markup","refreshPage","SimpleLightbox"],"mappings":"wvBAKA,MAAMA,EAAW,0BACXC,EAAU,qCAEVC,EAAO,CACX,WAAY,SAAS,cAAc,cAAc,EACjD,UAAW,SAAS,cAAc,aAAa,EAC/C,OAAQ,SAAS,cAAc,SAAS,CAC1C,EACAA,EAAK,OAAO,MAAM,QAAU,OAC5BA,EAAK,WAAW,iBAAiB,SAAUC,CAAY,EAEvD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpBF,EAAK,OAAO,MAAM,QAAU,eAC5BA,EAAK,UAAU,UAAY,GAE3B,MAAMG,EAAOD,EAAM,cACbE,EAAQD,EAAK,SAAS,MAAM,MAElC,GAAIC,IAAU,GAAI,CAChBC,EAAS,KAAK,CACZ,QAAS,4BACT,SAAU,WACV,MAAO,QACb,CAAK,EACDL,EAAK,OAAO,MAAM,QAAU,OAE5B,MACD,CACDM,EAAYF,CAAK,EACd,KAAKG,CAAgB,EACrB,MAAMC,GAAO,QAAQ,IAAIA,CAAG,CAAC,EAC7B,QAAQ,IAAML,EAAK,MAAK,CAAE,EAC7B,QAAQ,IAAIC,CAAK,CACnB,CAGA,SAASE,EAAYG,EAAO,CAC1B,OAAO,MACL,GAAGX,UAAiBC,OAAaU,sEACrC,EAAI,KAAKC,GAAQ,CACb,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAGjC,OAAOA,EAAK,MAChB,CAAG,CACH,CAYA,SAASH,EAAiB,CAAE,KAAAI,GAAQ,CAGlC,GAFAX,EAAK,OAAO,MAAM,QAAU,OAExBW,EAAK,SAAW,EAAG,CACrBN,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACR,CAAK,EACD,QAAQ,IAAIM,CAAI,EAChB,MACD,CAED,MAAMC,EAASD,EACZ,IACCA,GAAQ;AAAA,gCACkBA,EAAK;AAAA;AAAA,WAE1BA,EAAK;AAAA,mBACGA,EAAK;AAAA,UACdA,EAAK;AAAA;AAAA,gBAECA,EAAK;AAAA,eACNA,EAAK;AAAA,iBACHA,EAAK;AAAA,mBACHA,EAAK;AAAA,MAEnB,EACA,KAAK,EAAE,EAEVX,EAAK,UAAU,UAAYY,EAE3BC,EAAY,QAAO,CACrB,CAEA,MAAMA,EAAc,IAAIC,EAAe,gBAAiB,CACtD,SAAU,GACV,aAAc,MACd,aAAc,GAChB,CAAC"}